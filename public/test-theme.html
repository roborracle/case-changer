<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Test</title>
</head>
<body>
    <h1>Theme Persistence Test</h1>
    
    <div id="status">
        <h2>Current Status:</h2>
        <p>localStorage theme: <span id="stored-theme"></span></p>
        <p>HTML class: <span id="html-class"></span></p>
        <p>System preference: <span id="system-pref"></span></p>
    </div>
    
    <div style="margin-top: 20px;">
        <button onclick="setTheme('light')">Set Light</button>
        <button onclick="setTheme('dark')">Set Dark</button>
        <button onclick="setTheme('system')">Set System</button>
        <button onclick="clearTheme()">Clear Storage</button>
        <button onclick="updateStatus()">Refresh Status</button>
    </div>
    
    <div style="margin-top: 20px;">
        <p>Test navigation:</p>
        <a href="/">Home</a> | 
        <a href="/conversions">Conversions</a> | 
        <a href="/modern">Modern</a>
    </div>
    
    <script>
        function updateStatus() {
            document.getElementById('stored-theme').textContent = localStorage.getItem('case-changer-theme') || 'not set';
            document.getElementById('html-class').textContent = document.documentElement.className || 'no classes';
            document.getElementById('system-pref').textContent = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }
        
        function setTheme(theme) {
            localStorage.setItem('case-changer-theme', theme);
            updateStatus();
            alert('Theme set to: ' + theme + '\nNavigate to another page to test persistence.');
        }
        
        function clearTheme() {
            localStorage.removeItem('case-changer-theme');
            updateStatus();
        }
        
        // Initial update
        updateStatus();
        
        // Auto-update every second
        setInterval(updateStatus, 1000);
    </script>
</body>
</html>