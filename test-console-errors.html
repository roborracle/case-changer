<!DOCTYPE html>
<html>
<head>
    <title>Console Error Check - Case Changer Pro</title>
    <style>
        body { font-family: system-ui, -apple-system, sans-serif; padding: 20px; }
        #results { margin-top: 20px; }
        .error { color: red; }
        .warning { color: orange; }
        .success { color: green; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Browser Console Error Check</h1>
    <button onclick="checkConsole()">Check Console & Theme</button>
    <div id="results"></div>
    
    <script>
        // Capture console errors
        const errors = [];
        const warnings = [];
        const logs = [];
        
        // Override console methods to capture output
        const originalError = console.error;
        const originalWarn = console.warn;
        const originalLog = console.log;
        
        console.error = function(...args) {
            errors.push(args.join(' '));
            originalError.apply(console, args);
        };
        
        console.warn = function(...args) {
            warnings.push(args.join(' '));
            originalWarn.apply(console, args);
        };
        
        console.log = function(...args) {
            logs.push(args.join(' '));
            originalLog.apply(console, args);
        };
        
        function checkConsole() {
            const results = document.getElementById('results');
            results.innerHTML = '';
            
            // Check for console errors
            results.innerHTML += '<h2>Console Status</h2>';
            if (errors.length > 0) {
                results.innerHTML += '<p class="error">❌ Found ' + errors.length + ' errors:</p>';
                errors.forEach(err => {
                    results.innerHTML += '<pre class="error">' + err + '</pre>';
                });
            } else {
                results.innerHTML += '<p class="success">✅ No console errors detected</p>';
            }
            
            if (warnings.length > 0) {
                results.innerHTML += '<p class="warning">⚠️ Found ' + warnings.length + ' warnings:</p>';
                warnings.forEach(warn => {
                    results.innerHTML += '<pre class="warning">' + warn + '</pre>';
                });
            }
            
            // Test fetching the app
            results.innerHTML += '<h2>Testing App Load</h2>';
            
            fetch('http://127.0.0.1:8000')
                .then(response => {
                    results.innerHTML += '<p class="success">✅ App responded with status: ' + response.status + '</p>';
                    return response.text();
                })
                .then(html => {
                    // Check if theme-manager.js is included
                    if (html.includes('theme-manager')) {
                        results.innerHTML += '<p class="success">✅ theme-manager.js is included in the app</p>';
                    } else {
                        results.innerHTML += '<p class="warning">⚠️ theme-manager.js not found in HTML</p>';
                    }
                    
                    // Check for Alpine.js
                    if (html.includes('Alpine') || html.includes('x-data')) {
                        results.innerHTML += '<p class="success">✅ Alpine.js is configured</p>';
                    } else {
                        results.innerHTML += '<p class="warning">⚠️ Alpine.js not detected</p>';
                    }
                    
                    // Check for CSS variables
                    if (html.includes('--bg-primary') || html.includes('var(--')) {
                        results.innerHTML += '<p class="success">✅ CSS variables are present</p>';
                    } else {
                        results.innerHTML += '<p class="warning">⚠️ CSS variables not found</p>';
                    }
                    
                    // Open app in iframe to test
                    results.innerHTML += '<h2>Loading App in iFrame</h2>';
                    results.innerHTML += '<iframe src="http://127.0.0.1:8000" width="100%" height="400" style="border: 1px solid #ccc; margin-top: 10px;"></iframe>';
                })
                .catch(error => {
                    results.innerHTML += '<p class="error">❌ Failed to load app: ' + error + '</p>';
                });
        }
        
        // Auto-check on load
        window.addEventListener('load', () => {
            setTimeout(checkConsole, 1000);
        });
    </script>
</body>
</html>