/**
 * CRITICAL FIXES FOR NAVIGATION AND LAYOUT ISSUES
 * Priority overrides to fix broken header
 */

/* Reset navigation to fix alignment issues */
nav,
nav * {
    box-sizing: border-box;
}

/* Fix main navigation container */
nav > div.max-w-7xl {
    display: flex;
    align-items: center;
    height: 64px;
}

/* Fix the flex container that holds logo and nav items */
nav .flex.justify-between {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 100%;
}

/* Fix logo positioning */
nav .flex-shrink-0 {
    display: flex;
    align-items: center;
    height: 100%;
}

/* Fix left side navigation container */
nav .flex.items-center:first-child {
    display: flex;
    align-items: center;
    height: 100%;
}

/* Fix desktop navigation menu positioning */
nav .hidden.md\\:ml-10 {
    display: none;
}

@media (min-width: 768px) {
    nav .hidden.md\\:ml-10 {
        display: flex;
        align-items: center;
        margin-left: 2.5rem;
        height: 100%;
    }
}

/* Fix right side icons container */
nav .flex.items-center.space-x-4,
nav .flex.items-center.space-x-2 {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    height: 100%;
}

/* Fix all navigation buttons to prevent overlap */
nav button,
nav a.btn,
nav [role="button"] {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
    min-width: 36px;
    min-height: 36px;
    border-radius: 0.375rem;
    transition: all 0.2s;
    flex-shrink: 0;
}

/* Fix dark mode toggle button specifically */
button[aria-label*="theme"],
button[aria-label*="Theme"],
.theme-toggle,
[x-data*="themeToggle"] > button {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0.5rem !important;
    min-width: 36px !important;
    min-height: 36px !important;
    position: relative !important;
}

/* Fix search button */
button[aria-label*="Search"],
button[aria-label*="search"],
.search-toggle {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0.5rem !important;
    min-width: 36px !important;
    min-height: 36px !important;
}

/* Fix mobile menu button */
button[aria-label*="menu"],
.mobile-menu-toggle {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0.5rem !important;
    min-width: 36px !important;
    min-height: 36px !important;
}

/* Ensure icons inside buttons are properly sized */
nav button svg,
nav a svg {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

/* Fix dropdown positioning for theme selector */
.relative [x-show*="showMenu"],
.theme-dropdown,
[role="menu"] {
    position: absolute !important;
    top: calc(100% + 4px) !important;
    right: 0 !important;
    z-index: 50 !important;
    min-width: 160px !important;
}

/* Fix navigation link alignment */
nav a:not(.btn) {
    display: inline-flex;
    align-items: center;
    height: 100%;
    padding: 0 1rem;
    white-space: nowrap;
}

/* Prevent text from breaking layout */
nav .text-xl {
    line-height: 1;
    white-space: nowrap;
}

/* Fix mobile view */
@media (max-width: 767px) {
    nav .flex.justify-between {
        padding: 0 1rem;
    }
    
    /* Hide desktop nav on mobile */
    nav .hidden.md\\:flex {
        display: none !important;
    }
    
    /* Show mobile menu button */
    nav .md\\:hidden {
        display: flex !important;
    }
    
    /* Ensure proper spacing on mobile */
    nav .flex.items-center.space-x-2 {
        gap: 0.25rem;
    }
}

/* Fix z-index stacking issues */
nav {
    position: sticky;
    top: 0;
    z-index: 40;
}

nav .absolute,
nav [role="menu"],
.dropdown-menu {
    z-index: 50;
}

/* Fix button hover states */
nav button:hover,
nav a.btn:hover {
    background-color: rgba(0, 0, 0, 0.05);
}

.dark nav button:hover,
.dark nav a.btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

/* Ensure proper focus states */
nav button:focus-visible,
nav a:focus-visible {
    outline: 2px solid #007AFF;
    outline-offset: 2px;
}

/* Fix the tool count display */
.tool-count::before {
    content: "172+ ";
}

/* Force fix overlapping elements */
nav > div {
    position: relative;
}

nav .flex > * {
    position: relative;
}

/* Ensure dropdowns don't cause overflow */
nav .relative {
    position: relative;
}

nav .absolute {
    position: absolute;
}

/* Critical fix for flex container children */
nav .flex > *:not(:last-child) {
    margin-right: 0.5rem;
}

/* Override any problematic transforms */
nav * {
    transform: none !important;
}

nav button:hover,
nav a:hover {
    transform: none !important;
}

/* Ensure text is visible */
nav,
nav * {
    color: inherit;
}

/* Fix specific Alpine.js related display issues */
[x-cloak] {
    display: none !important;
}

[x-show] {
    display: none;
}

[x-show="true"],
[x-show="open"] {
    display: block;
}

/* Force proper button spacing */
nav .space-x-2 > button + button,
nav .space-x-4 > button + button {
    margin-left: 0.5rem !important;
}