<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS Theme Test</title>
    <script>
        console.log('=== Theme Testing ===');
        
        // Test localStorage
        function testLocalStorage() {
            try {
                localStorage.setItem('case-changer-theme', 'dark');
                const stored = localStorage.getItem('case-changer-theme');
                console.log('localStorage test:', stored === 'dark' ? 'PASS' : 'FAIL');
                return stored;
            } catch(e) {
                console.error('localStorage error:', e);
                return null;
            }
        }
        
        // Test cookie setting
        function testCookie() {
            document.cookie = 'case-changer-theme=dark; path=/; max-age=31536000; SameSite=Lax';
            const cookies = document.cookie;
            console.log('Cookie test:', cookies.includes('case-changer-theme=dark') ? 'PASS' : 'FAIL');
            console.log('All cookies:', cookies);
            return cookies;
        }
        
        // Run tests on load
        window.onload = function() {
            console.log('Running theme tests...');
            const theme = testLocalStorage();
            const cookies = testCookie();
            
            // Display results
            document.getElementById('localStorage').textContent = theme || 'not set';
            document.getElementById('cookies').textContent = cookies || 'no cookies';
            document.getElementById('htmlClass').textContent = document.documentElement.className || 'no classes';
            
            // Test if themeManager exists
            if (window.themeManager) {
                console.log('themeManager exists:', window.themeManager);
                document.getElementById('themeManager').textContent = 'Loaded';
            } else {
                console.log('themeManager not found');
                document.getElementById('themeManager').textContent = 'Not loaded';
            }
        };
    </script>
</head>
<body>
    <h1>JavaScript Theme Testing</h1>
    
    <h2>Test Results:</h2>
    <ul>
        <li>localStorage: <strong id="localStorage"></strong></li>
        <li>Cookies: <strong id="cookies"></strong></li>
        <li>HTML class: <strong id="htmlClass"></strong></li>
        <li>ThemeManager: <strong id="themeManager"></strong></li>
    </ul>
    
    <h2>Navigation Tests:</h2>
    <p>
        <a href="/">Home (with theme)</a> | 
        <a href="/conversions">Conversions</a> |
        <a href="/test-js-theme.html">Reload This Page</a>
    </p>
    
    <p>Open browser console to see detailed test results.</p>
</body>
</html>