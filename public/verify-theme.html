<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Theme Verification</title>
    <script>
        // Apply theme IMMEDIATELY like the Laravel app does
        (function() {
            const getStoredTheme = () => {
                try {
                    return localStorage.getItem('case-changer-theme');
                } catch {
                    return null;
                }
            };
            
            const theme = getStoredTheme() || 'system';
            const html = document.documentElement;
            
            // Remove any existing theme classes
            html.classList.remove('light', 'dark');
            
            if (theme === 'system') {
                // Apply system preference
                const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                html.classList.add(isDark ? 'dark' : 'light');
            } else {
                // Apply specific theme
                html.classList.add(theme);
            }
        })();
    </script>
    <style>
        body { font-family: system-ui; padding: 20px; }
        .dark { background: #1a1a1a; color: white; }
        .light { background: white; color: black; }
        .status { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .dark .status { background: #333; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Theme System Verification</h1>
    
    <div class="status">
        <h3>Current State:</h3>
        <p>Stored Theme: <strong id="stored"></strong></p>
        <p>HTML Classes: <strong id="classes"></strong></p>
        <p>Effective Theme: <strong id="effective"></strong></p>
    </div>
    
    <div>
        <h3>Test Theme Changes:</h3>
        <button onclick="setAndReload('light')">Set Light & Reload</button>
        <button onclick="setAndReload('dark')">Set Dark & Reload</button>
        <button onclick="setAndReload('system')">Set System & Reload</button>
    </div>
    
    <div>
        <h3>Navigate to Test Persistence:</h3>
        <a href="/">Home</a> | 
        <a href="/conversions">Conversions</a> | 
        <a href="/conversions/case-conversions">Category Page</a> |
        <a href="/verify-theme.html">Back to Verify</a>
    </div>
    
    <script>
        function updateStatus() {
            document.getElementById('stored').textContent = localStorage.getItem('case-changer-theme') || 'not set';
            document.getElementById('classes').textContent = document.documentElement.className || 'none';
            document.getElementById('effective').textContent = 
                document.documentElement.classList.contains('dark') ? 'dark' : 
                document.documentElement.classList.contains('light') ? 'light' : 'unknown';
        }
        
        function setAndReload(theme) {
            localStorage.setItem('case-changer-theme', theme);
            location.reload();
        }
        
        updateStatus();
    </script>
</body>
</html>